---
title: "projet.Rmd"
author: "Eric"
date: "21 janvier 2019"
output: html_document
---

#ETAPE 1

```{r}

setwd = ("./2019_L3.Rproj")

```

1) LECTURE DES JEUX DE DONNEE

```{r}

donnee1 = read.csv (file = "./../data/placenta_edragon_91mol.csv", header = T, sep = ";", dec = ".")
donnee2 = read.csv (file = "./../data/placenta_MOE_2D_192.csv", header = T, dec = ".", sep =";")

```

2) ON VERIFIE SI LES NOMS DES LIGNES SONT CORRECTES

```{r}
nom_col1 = donnee1[,"NOM"]
nom_col2 = donnee2[, "Noms"]
comp = nom_col1%in%nom_col2
comp
```

-> Les noms des lignes sont identiques

3) ON INSERE LA DONNEE CLAIRANCE DANS LE FICHIER EDRAGON
```{r}
clairance = donnee2[,"CI"]

donneefin = data.frame(donnee1, clairance)
```


4) DIMENSION DE LA TABLE
```{r}
dim = dim(donneefin)
dim
```
-> Les dimension de la table sont 


5) LES ENTETES DES LIGNES
```{r}
namecol = colnames(donneefin)
```





#ETAPE 2

1)VALEURS ABERRANTES DANS CI

On remarque une valeur aberrante (1,57)
On extrait la valeur dans boxmax


```{r}
hist(donneefin[, "clairance"])
box = boxplot (donneefin [,"clairance"])
box
boxmax = box$out
```

-> On fait une moyenne avec la valeur aberrante (pour comparaison).

```{r}
moy = mean(donneefin [, "clairance"])
moy
```

-> On remplace la (ou les) valeurs aberentes par NA (les valeurs aberantes etant $out)

```{r}
CI2 = donneefin$clairance[donneefin$clairance >= boxmax] <- NA
```

-> On fait la moyenne des donnees en enlevant NA

```{r}
moyfin = mean (donneefin [, "clairance"], na.rm = T)
moyfin
```

-> On remplace la valeur NA par la moyenne calculee

```{r}
CIfin = donneefin$clairance [is.na(donneefin$clairance)] <- moyfin
donneefin$clairance
```



2) DONNEE MANQUANTE (-999)

-> On compte le nombre de -999

Methode 1: Sans convertir -999 en NA

```{r}
#suma = apply(donneefin, 2, function(x) sum(x==-999))
```

-> On supprimme les colonnes ne contenant que des -999 ()

```{r}
#donneefin2 = Filter(function(x) length(unique(x))>1, donneefin)
```



Methode 2: On remplace les -999 par Na

```{r}
donneefin[donneefin == -999] <- NA
```


-> On compte le nombre de NA dans chaque colonne et on enleve les colonnes avec seulement des NA

```{r}
donneefin2bis = donneefin[, colSums(is.na(donneefin)) != nrow(donneefin)]
```

-> Ou on aurait pu faire : 

```{r}
#donneefin2bis = donneefin[ , !apply( donneefin , 2 , function(donneefin)       all(is.na(donneefin)))]
```


NOTE : Cependant je n'ai pas reussi à supprimer les NA present dans plus de n cases dans 
une colonne


-> On élimine les 2 premieres colonnes pour effectuer la moyenne de chaque colonne

```{r}
donneemoy = donneefin2bis[ ,3:796]
```

-> On fait la moyenne de chaque colonne

```{r}
moyfin2 = apply(donneemoy, 2, function(x) mean(x, na.rm=T))
```

-> On remplace les NA par les moyennes de la colonne respectives

```{r}
donneefin3 = apply (donneemoy, 2, function(x) x[is.na (x)]) <- moyfin2
donneefin3
```


3) DONNEE CONSTANTES

-> On verifie les variances des colonnes contenant des valeurs constantes

```{r}

```




